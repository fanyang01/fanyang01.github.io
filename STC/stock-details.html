<link rel="import" href="bower_components/polymer/polymer.html">
<dom-module id='stock-details'>
  <style>
  :host {
    display: block;
    height: 100%;
  }
  
  div.main-container {
    background-color: white;
    height: 100%;
    padding: 1em;
    width: 100%;
  }
  
  @media(min-width: 600px) {
    div.main-container {
      max-width: 48em;
      margin: 10px auto;
    }
  }
  
  .stock-header {
    padding: 10px;
    font-size: 1.4em;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .stock-code {
    padding: 10px;
    font-size: 0.8em;
    color: rgba(0, 0, 0, 0.7);
  }
  
  .content-container {
    display: flex;
    flex-flow: row wrap;
    justify-content: flex-start;
    padding: 1em;
    width: 100%;
  }
  
  @media(min-width: 600px) {
    .snap-meta {
      padding: 1em;
      margin-right: 4em;
    }
    .snap-data {
      flex: 1 auto;
    }
  }
  
  @media(max-width: 600px) {
    .snap-data {
      width: 100%;
      margin-top: 2em;
    }
  }
  
  .meta-price-change {
    padding-bottom: 15px;
  }
  
  .current-price {
    font-size: 1.6em;
    font-weight: bold;
    margin-right: 10px;
  }
  
  .change-rise {
    color: var(--paper-green-500);
    font-size: 1.2em;
  }
  
  .change-fall {
    color: red;
    font-size: 1.2em;
  }
  
  .snap-data table {
    border-collapse: collapse;
  }
  
  .snap-data th {
    padding: 5px;
    text-align: left;
    font-weight: normal;
    color: rgba(0, 0, 0, 0.6);
  }
  
  .snap-data td {
    padding: 5px;
    text-align: right;
  }
  </style>
  <template>
    <more-route name="stock-details" context></more-route>
    <iron-media-query query="min-width: 600px" query-matches="{{largeScreen}}">
    </iron-media-query>
    <paper-header-panel class="flex">
      <paper-toolbar>
        <paper-button on-click="back">
          <iron-icon icon="arrow-back"></iron-icon>
          <span>Back</span>
        </paper-button>
        <span class="flex"></span>
        <paper-button hidden$="{{!largeScreen}}">
          <iron-icon icon="add"></iron-icon>
          <span>Add to collection</span>
        </paper-button>
        <paper-icon-button icon="add" hidden$="{{largeScreen}}"></paper-icon-button>
      </paper-toolbar>
      <div class="layout vertical main-container">
        <div class="stock-header flex">
          <span>{{stock.name}}</span>
          <span class="stock-code">{{stock.id}}</span>
        </div>
        <div class="content-container">
          <div class="snap-meta layout vertical">
            <div class="meta-price-change">
              <span class="current-price">{{stock.currentPrice}}</span>
              <span class$="{{changeClass(stock.change)}}">{{change(stock.change, stock.changeRate)}}</span>
            </div>
            <div class="time">{{stock.time}}</div>
          </div>
          <div class="snap-data">
            <table>
              <tr>
                <th>Range</th>
                <td>{{range(stock.dayLow, stock.dayHigh)}}</td>
              </tr>
              <tr>
                <th>Week</th>
                <td>{{range(stock.weekLow, stock.weekHigh)}}</td>
              </tr>
              <tr>
                <th>Month</th>
                <td>{{range(stock.monthLow, stock.monthHigh)}}</td>
              </tr>
              <tr>
                <th>Trading</th>
                <td></td>
              </tr>
              <tr>
                <th>Mkt Cap</th>
                <td></td>
              </tr>
              <tr>
                <th>Shares</th>
                <td></td>
              </tr>
            </table>
          </div>
        </div>
      </div>
    </paper-header-panel>
  </template>
  <script>
  Polymer({
    is: 'stock-details',
    properties: {
      stock: {
        type: Object,
        value: {}
      }
    },
    back: function() {
      window.history.back();
    },
    change: function(price, rate) {
      return (price > 0 ? "+" : "") + price + "(" + rate * 100 + "%)";
    },
    changeClass: function(price) {
      return price > 0 ? 'change-rise' : 'change-fall';
    },
    range: function(low, high) {
      return low + " - " + high;
    },
    ready: function() {
      this.stock = {
        id: "NASDAQ:APPL",
        name: "Apple Inc",
        currentPrice: 127.61,
        change: 1.01,
        changeRate: 0.008,
        time: "Tue Jun 23 2015 10:36",
        dayLow: 127.08,
        dayHigh: 128.06,
        weekLow: 125.02,
        weekHigh: 129.23,
        monthLow: 119.12,
        monthHigh: 130.01
      }
    }
  })
  </script>
</dom-module>
